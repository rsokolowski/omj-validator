{% extends "base.html" %}

{% block title %}Polecane zadania - OMJ Validator{% endblock %}

{% block head %}
<link rel="stylesheet" href="/static/progress.css">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Polecane zadania</h1>
    <p class="subtitle">Zadania dopasowane do Twojego poziomu</p>
</div>

<!-- Category Filter -->
<div class="filter-section">
    <h3>Filtruj według kategorii</h3>
    <div class="filter-buttons" id="category-filters">
        <button class="filter-btn active" data-category="">Wszystkie</button>
        {% for cat in categories %}
        <button class="filter-btn" data-category="{{ cat }}">
            {{ {'algebra': 'Algebra', 'geometria': 'Geometria', 'teoria_liczb': 'Teoria liczb', 'kombinatoryka': 'Kombinatoryka', 'logika': 'Logika', 'arytmetyka': 'Arytmetyka'}[cat] or cat }}
        </button>
        {% endfor %}
    </div>
</div>

<!-- Recommended Tasks Section -->
{% if can_view_progress %}
<div class="recommended-section" id="recommended-section">
    <div class="recommended-list" id="recommended-list">
        <div class="loading-placeholder">Ładowanie rekomendacji...</div>
    </div>
</div>
{% else %}
<div class="alert alert-info">
    <strong>ℹ Wskazówka:</strong> <a href="/login">Zaloguj się</a>, aby śledzić swoje postępy i otrzymywać spersonalizowane rekomendacje.
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script src="/static/progress.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initProgressPage({
            canViewProgress: {{ 'true' if can_view_progress else 'false' }}
        });
    });
</script>
{% endblock %}
